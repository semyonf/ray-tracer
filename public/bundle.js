!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);var n=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.z=i}return t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y,this.z+e.z)},t.prototype.sub=function(e){return new t(this.x-e.x,this.y-e.y,this.z-e.z)},t.prototype.calcNorm=function(){return Math.sqrt(this.dotProduct(this))},t.prototype.scale=function(e){return new t(this.x*e,this.y*e,this.z*e)},t.prototype.normalize=function(){return this.scale(1/this.calcNorm())},t.prototype.xProduct=function(e){return new t(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)},t.prototype.dotProduct=function(t){return this.x*t.x+this.y*t.y+this.z*t.z},t.globalUp=new t(0,1,0),t}(),r=function(){return function(t,e,i){void 0===e&&(e=new n),void 0===i&&(i=100),this.origin=t,this.target=e,this.power=i,this.direction=this.target.sub(this.origin).normalize()}}(),o=function(){return function(t,e){this.origin=t,this.direction=e}}(),a=function(){return function(t,e,i){this.object=t,this.ray=e,this.dist=i}}(),s=function(){function t(t,e,i,n){this.origin=t,this.radius=n,this.color=e,this.ambient=i}return t.prototype.normal=function(t){return this.origin.sub(t).normalize()},t.prototype.checkIntersection=function(t){var e=this.origin.sub(t.origin),i=e.dotProduct(t.direction),n=Math.pow(this.radius,2)-Math.pow(e.calcNorm(),2)+Math.pow(i,2);if(n>=0){var r=i-Math.sqrt(n);return new a(this,t,r)}return null},t}(),c=function(){function t(t,e,i){this.fieldOfView=Math.PI/6,this.objects=[new s(new n(5,-3,2),new n(150,90,30),.1,3),new s(new n(-3,0,3),new n(77,109,109),.1,5),new s(new n(5.5,7,5),new n(150,76,76),.1,5)],this.canvas=t,this.imageWidth=e*devicePixelRatio,this.imageHeight=i*devicePixelRatio,t.width=this.imageWidth,t.height=this.imageHeight,t.style.height=this.imageHeight/devicePixelRatio+"px",t.style.width=this.imageWidth/devicePixelRatio+"px"}return t.prototype.render=function(){var t=this.canvas.getContext("2d"),e=t.getImageData(0,0,this.imageWidth,this.imageHeight);e.data.fill(255);for(var i=new n(0,0,-10).scale(7),r=new n(0,0,0).sub(i),a=r.normalize(),s=n.globalUp.xProduct(r).normalize(),c=a.xProduct(s),u=this.imageHeight/this.imageWidth,h=Math.tan(this.fieldOfView/2),d=h*u,l=2*h,f=s.scale(l/(this.imageWidth-1)),p=2*d,g=c.scale(p/(this.imageHeight-1)),y=a.sub(s.scale(h)).sub(c.scale(d)),w=0;w<this.imageWidth;w++)for(var m=0;m<this.imageHeight;m++){var v=y.add(f.scale(w-1)).add(g.scale(m-1)).normalize(),b=this.traceRay(new o(i,v)),x=4*w+m*this.imageWidth*4;e.data[x+0]=b.x,e.data[x+1]=b.y,e.data[x+2]=b.z}t.putImageData(e,0,0)},t.prototype.shade=function(t){for(var e=t.object,i=t.ray,a=t.dist,s=e.color.scale(e.ambient),c=[new r(new n(-11,3,-5)),new r(new n(4,-4,-6).scale(1.2)),new r(new n(0,-19,2).scale(10))],u=i.origin.add(i.direction.scale(a)),h=e.normal(u),d=0,l=c;d<l.length;d++){var f=l[d];s=this.checkIntersections(new o(u,u.sub(f.origin).normalize())).dist<-.1?s.add(this.calcDiffuse(e,f,h)):s.add(this.calcDiffuse(e,f,h)).add(this.calcSpecular(i,h,f))}return s},t.prototype.calcSpecular=function(t,e,i){var r=Math.pow(t.direction.sub(e.scale(2*e.dotProduct(t.direction))).dotProduct(i.direction),16);return new n(255,255,255).scale(.2*Math.min(1,r))},t.prototype.calcDiffuse=function(t,e,i){var n=t.origin.sub(e.origin).calcNorm(),r=Math.pow(n,-2)*e.power,o=e.direction.dotProduct(i)*r;return t.color.scale(Math.min(1,o))},t.prototype.checkIntersections=function(t){for(var e=null,i=0,n=this.objects;i<n.length;i++){var r=n[i].checkIntersection(t);(!e||r&&e.dist>r.dist)&&(e=r)}return e},t.prototype.traceRay=function(t,e){void 0===e&&(e=0);var i=this.checkIntersections(t),r=new n(76,76,76).scale(.7);if(!i)return r;var a=i.ray,s=i.dist,c=i.object,u=this.shade(i);if(e<2){var h=a.origin.add(a.direction.scale(s)),d=c.normal(h);return u.add(this.traceRay(new o(h,d),++e).scale(.2))}return u},t}();Object.defineProperty(window,"RayTracer",{enumerable:!0,value:c})}]);